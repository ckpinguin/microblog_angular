webpackJsonp([0],{"070B":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("/oeL"),o=n("MhI6"),r=n("LBMQ"),a=n("chAU"),c=n("wFAi");n.d(e,"BlogModule",function(){return l});var s=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},l=function(){function t(){}return t}();l=s([n.i(i.b)({imports:[c.a,a.a],declarations:[a.b,o.a,r.a]})],l)},"0ry9":function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()},"4Egq":function(t,e,n){"use strict";var i=n("/oeL"),o=n("bm2B"),r=n("BkNc"),a=n("RpuY"),c=(n.n(a),n("djS2")),s=n("Z04r"),l=n("F7n9"),u=(n.n(l),n("/k07")),f=n("XKlT");n.d(e,"a",function(){return g});var d=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},p=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},h=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},g=function(){function t(t,e,n,i,o){this.blogService=t,this.loginService=e,this.activatedRoute=n,this.router=i,this.snackBar=o,this.show=!0}return t.prototype.ngOnInit=function(){var t=this;c.a&&console.log("form called with input parameter entry: ",this.inputEntry),this.entry=Object.assign({},this.inputEntry),this.subscription=this.activatedRoute.params.map(function(t){return t.id}).filter(function(t){return void 0!==t}).mergeMap(function(e){return t.blogService.getEntry(e)}).subscribe(function(e){t.entry=e,c.a&&console.log("setting entry: ",t.entry),t.isEntryUser()||"new"===t.callPath||(t.snackBar.open("You can only edit your own entries","OK",{duration:5e3}),t.onCancel())}),this.callPath=this.activatedRoute.snapshot.url[0].path},t.prototype.isEntryUser=function(){return void 0!==this._entry.user&&this._entry.user===this.loginService.getCurrentUser()},Object.defineProperty(t.prototype,"entry",{get:function(){return d({},this._entry,{author:this._entry.author?this._entry.author:this.loginService.getCurrentUserName()})},set:function(t){this._entry=t},enumerable:!0,configurable:!0}),t.prototype.onSubmit=function(t){return this.form.pristine||this.blogService.saveEntry(d({},t,{date:(new Date).toJSON(),user:this.loginService.getCurrentUser()})),this.show=!1,this.router.navigate([".."]),!1},t.prototype.onCancel=function(){return this.show=!1,this.router.navigate([".."]),!1},t}();p([n.i(i._13)(o.a),h("design:type","function"==typeof(y=void 0!==o.a&&o.a)&&y||Object)],g.prototype,"form",void 0),p([n.i(i.o)(),h("design:type","function"==typeof(b=void 0!==l.BlogEntry&&l.BlogEntry)&&b||Object)],g.prototype,"inputEntry",void 0),g=p([n.i(i.d)({selector:"ck-edit-blog-entry-form",template:n("oiUe"),styles:[n("ZR26")]}),h("design:paramtypes",["function"==typeof(m=void 0!==u.a&&u.a)&&m||Object,"function"==typeof(v=void 0!==f.a&&f.a)&&v||Object,"function"==typeof(O=void 0!==r.a&&r.a)&&O||Object,"function"==typeof(w=void 0!==r.c&&r.c)&&w||Object,"function"==typeof(j=void 0!==s.a&&s.a)&&j||Object])],g);var y,b,m,v,O,w,j},F7n9:function(t,e){},LBMQ:function(t,e,n){"use strict";var i=n("/oeL"),o=n("BkNc"),r=n("F7n9"),a=(n.n(r),n("/k07")),c=n("djS2");n.d(e,"a",function(){return u});var s=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,n){this.router=t,this.activatedRoute=e,this.blogService=n}return t.prototype.ngOnInit=function(){var t=this;this.routeSubscription=this.activatedRoute.params.subscribe(function(e){var n=e.id||"";c.a&&console.log("received route param id: ",n),t.item=void 0===t.item?t.item=t.blogService.getEntry(n):t.item})},t.prototype.ngOnDestroy=function(){this.routeSubscription.unsubscribe()},Object.defineProperty(t.prototype,"imageWithPath",{get:function(){return"assets/images/"+this.item.image},enumerable:!0,configurable:!0}),t.prototype.onEdit=function(t){this.router.navigate(["./edit",t])},t.prototype.onDelete=function(t){this.blogService.deleteEntry(t)},t}();s([n.i(i.o)(),l("design:type","function"==typeof(f=void 0!==r.BlogEntry&&r.BlogEntry)&&f||Object)],u.prototype,"item",void 0),u=s([n.i(i.d)({selector:"ck-blog-item",template:n("mdT5"),styles:[n("wnLK")]}),l("design:paramtypes",["function"==typeof(d=void 0!==o.c&&o.c)&&d||Object,"function"==typeof(p=void 0!==o.a&&o.a)&&p||Object,"function"==typeof(h=void 0!==a.a&&a.a)&&h||Object])],u);var f,d,p,h},MhI6:function(t,e,n){"use strict";var i=n("/oeL"),o=n("/k07");n.d(e,"a",function(){return c});var r=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.blogService=t}return t.prototype.ngOnInit=function(){this.entries$=this.blogService.entries$},t}();c=r([n.i(i.d)({selector:"ck-blog-list",template:n("gFXn")}),a("design:paramtypes",["function"==typeof(s=void 0!==o.a&&o.a)&&s||Object])],c);var s},NUEc:function(t,e,n){"use strict";var i=n("/oeL"),o=n("BkNc"),r=n("/k07"),a=n("djS2");n.d(e,"a",function(){return l});var c=this&&this.__decorate||function(t,e,n,i){var o,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,i);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(r<3?o(a):r>3?o(e,n,a):o(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e,n){this.activatedRoute=t,this.router=e,this.blogService=n,this.pathNew=!1}return t.prototype.ngOnInit=function(){var t=this;a.a&&console.log("activatedRoute: ",this.activatedRoute),this.title=this.activatedRoute.snapshot.data.title,this.pathNew=!1,this.router.events.filter(function(t){return t instanceof o.d}).subscribe(function(e){"new"===e.url.split("/").pop()?(t.pathNew=!0,t.blogService.createNewEntry()):t.pathNew=!1}),this.blogService.getLastEntry().subscribe(function(e){t.newEntry=e,a.a&&console.log("last entry: ",t.newEntry)})},t}();l=c([n.i(i.d)({selector:"ck-blog-page",template:n("p411"),styles:[n("0ry9")]}),s("design:paramtypes",["function"==typeof(u=void 0!==o.a&&o.a)&&u||Object,"function"==typeof(f=void 0!==o.c&&o.c)&&f||Object,"function"==typeof(d=void 0!==r.a&&r.a)&&d||Object])],l);var u,f,d},RpuY:function(t,e,n){"use strict";var i=n("bKpL"),o=n("cPhF");i.Observable.prototype.mergeMap=o.mergeMap,i.Observable.prototype.flatMap=o.mergeMap},ZR26:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,".ng-touched.ng-invalid{border-color:#a94442}.hidden{visibility:hidden}",""]),t.exports=t.exports.toString()},chAU:function(t,e,n){"use strict";var i=n("BkNc"),o=n("NUEc"),r=n("MhI6"),a=n("4Egq"),c=n("aW6N");n.d(e,"b",function(){return l}),n.d(e,"a",function(){return u});var s=[{path:"",component:o.a,data:{title:"Blog"},children:[{path:"",component:r.a,outlet:"list-outlet"},{path:"new",component:a.a,canActivate:[c.a],data:{title:"New entry"}},{path:":id",children:[{path:"edit",component:a.a,canActivate:[c.a],data:{title:"Edit entry"}}]}]}],l=[o.a,a.a],u=(c.a,i.b.forChild(s))},gFXn:function(t,e){t.exports='<div class="listContent">\n    <router-outlet></router-outlet>\n    <ng-container *ngFor="let entry of entries$ | async">\n        \x3c!-- only show, when the new entry is in editing mode --\x3e\n        \x3c!--<ck-edit-blog-entry-form *ngIf="entry.editing" [inputEntry]="entry"></ck-edit-blog-entry-form>--\x3e\n        \x3c!-- only show entries with title (new entry does not have one yet) --\x3e\n        <ck-blog-item\n            *ngIf="entry.title"\n            [item]="entry">\n        </ck-blog-item>\n    </ng-container>\n</div>'},mdT5:function(t,e){t.exports='<div class="blog-item" >\n    <hr />\n    <router-outlet></router-outlet>\n    <div class="item-outlet">\n    </div>\n    <div class="blog-image">\n        <img *ngIf="item.image" [src]="imageWithPath" [alt]="item.title" />\n    </div>\n    <div class="blog-summary">\n        <h2>\n            {{item?.title}}<br />\n            <div class="fa fa-trash"\n                 (click)="onDelete(item.id)"></div>\n            <div class="fa fa-edit"\n                 [routerLink]="[ item.id, \'edit\' ]"\n            ></div>\n        </h2>\n        <div *ngIf="item.author"><h3><small>Written by: <em>{{item?.author}}</em></small></h3>\n            <div *ngIf="item.date"><h3><small> on <em>{{item?.date | dateFormatPipe }}</em></small></h3></div>\n        </div>\n        <p>{{item?.text}}</p>\n    </div>\n</div>'},oiUe:function(t,e){t.exports='<form novalidate (ngSubmit)="onSubmit(form.value)"\n        #form="ngForm" *ngIf="show"> \n    <div class="form-group">\n        <input type="hidden" class="hidden"\n            id="id" name="id"\n            [(ngModel)]="entry.id" #id="ngModel" />\n        \x3c!-- TODO: make this field editable --\x3e\n        <input type="hidden" class="hidden"\n            id="author" name="author"\n            [(ngModel)]="entry.author" #author="ngModel" />\n        <label>Titel</label>\n        <input type="text" class="form-control"\n            id="title" name="title"\n            [(ngModel)]="entry.title" #title="ngModel"\n            placeholder="Titel eingeben..."\n            required minlength="5" maxlength="128"/>\n        <ck-show-error path="title" text="Titel"></ck-show-error>\n    </div>\n    <div class="form-group">\n        <label>Inhalt</label>\n        <textarea class="form-control" id="text" name="text"\n            [(ngModel)]="entry.text" #text="ngModel"\n            placeholder="Textinhalt eingeben...">\n        </textarea>\n        <ck-show-error path="text" text="Inhalt"></ck-show-error>\n    </div>\n    \x3c!-- TODO: async http-check for image availability? \n         Be aware: that would impede reproducability for any\n         performance tests, if done with external images! --\x3e\n    <div class="form-group">\n        <label>Bild-URL</label>\n        <input class="form-control" type="text" id="image" name="image"\n            [(ngModel)]="entry.image" #image="ngModel"\n            placeholder="Bildadresse eingeben..." />\n        <ck-show-error path="image" text="Bild-URL"></ck-show-error>\n    </div>\n    <button type="submit" class="btn btn-default"\n        [disabled]="form.pristine || !form.valid">\n        Blogeintrag speichern\n    </button>\n    <button type="button" class="btn btn-default"\n        [disabled]="form.submitting"\n        (click)="onCancel()">\n        Zurücksetzen\n    </button>\n</form>'},p411:function(t,e){t.exports='<div class="title">\n    <h1>{{title}}</h1>\n</div>\n<div class="mainContent">\n    <button [routerLink]="[ \'new\' ]"\n        *ngIf="!pathNew"\n        class="btn">\n        Create New Entry\n    </button>\n    <router-outlet></router-outlet>\n</div>\n<div class="jumbotron">\n    <h2>Attention item</h2>\n    <router-outlet name="attention-outlet"></router-outlet>\n</div>\n<router-outlet name="list-outlet"></router-outlet>\n\x3c!--<ck-blog-list></ck-blog-list>--\x3e\n'},wnLK:function(t,e,n){e=t.exports=n("rP7Y")(!1),e.push([t.i,"",""]),t.exports=t.exports.toString()}});